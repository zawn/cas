---
layout: 违约
title: CAS - MDC 记录配置
category: 日志 & 审计
---

# 映射诊断上下文

为了给每个请求盖上唯一的印记，中科院将上下文 信息放入 `MDC`，即映射诊断上下文的缩写。 这实际上 翻译为记录上下文中可用的一些特殊变量， 可能会传达有关请求或身份验证事件性质的其他信息。

| 变量      | 描述                |
| ------- | ----------------- |
| `远程地址`  | HTTP 请求的远程地址。     |
| `远程使用者` | HTTP 请求的远程用户。     |
| `服务器名`  | HTTP 请求的服务器名称。    |
| `服务器端口` | HTTP请求的服务器端口。     |
| `现场`    | HTTP 请求的本地。       |
| `内容类型`  | HTTP请求的内容类型。      |
| `上下文路径` | HTTP 请求的上下文路径。    |
| `本地地址`  | HTTP 请求的本地地址。     |
| `本地端口`  | HTTP 请求的本地端口。     |
| `远程端口`  | HTTP 请求的远程端口。     |
| `路径信息`  | HTTP 请求的路径信息。     |
| `协议`    | HTTP 请求的协议。       |
| `身份类型`  | HTTP 请求的身份验证类型。   |
| `方法`    | HTTP请求的方法。        |
| `查询串`   | HTTP 请求的查询字符串。    |
| `请求乌里`  | 请求 URI 的 HTTP 请求。 |
| `方案`    | HTTP 请求的方案。       |
| `时区`    | HTTP请求的时区。        |
| `主要`    | CAS验证了主ID。        |

此外，所有可用的请求属性、标题和参数都作为变量暴露。

上述变量可用于记录模式：

- 自行使用 `%X` 来包含所有变量。
- 使用 `%X{key}` 包括指定的变量。

```xml
<Console name="console" target="SYSTEM_OUT">
    <PatternLayout pattern="%X{locale} %d %p [%c] - &lt;%m&gt;%n"/>
</Console>
```