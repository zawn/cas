---
layout: 违约
title: CAS - 升级指南
category: 规划
---

# 升级指南

一般来说，建议采用者尽量保持其 CAS 部署与最新的 CAS 版本保持一致。 特别是，应立即应用具有 `PATCH` 或 `安全` 性质的版本，因为它们是相应父版本 的掉落替代品。 有关详细信息，请参阅 CAS [发布策略](../../developer/Release-Policy.html) 。

CAS 升级的总体目标可能是：

1. 升级是否修复了关键的安全漏洞或恼人的问题？ 我的 CAS 部署是否 该漏洞和/或错误的影响？
2. 升级是否提供可能有助于实现本地使用案例的功能？
3. 升级是否提供了在我的叠加内本地携带的功能，以便通过摆脱这些 本地更改，我可以直接实现它们从 CAS 中获益，并最终获得更小、更可维护的覆盖？

本文档试图在非常高的层次上描述升级给定 [CAS 部署所需的范围和努力，](../installation/WAR-Overlay-Installation.html)。 我们不是描述 审查和调整所需的所有步骤/更改（这是不可能的），而是描述了可以执行升级的战略。

## 更改日志

在尝试升级之前，请查看 CAS 更改日志</a>

，以确定您打算升级到的版本中包含哪些更改/修复 ，以及这些更改/修复是否适用于您的环境 和 CAS 部署。 如果您正在使用较旧的 CAS 版本，并且遇到看似错误的情况，则通过查看更改日志，可能会 ，您将找到一个用于处理问题的叠加的掉入替换。 </p> 



## 讨论问题

在查看了更改日志后，如果您没有看到修复/调整您心目中的行为的改进，请 在适当的 CAS 邮件列表中讨论此问题。 讨论的结果将是范围/努力 评估，以确定解决方案的可行性和将进行修复的目标版本。 



## 范围审查

一旦您决定您的理想CAS版本的升级，在尝试升级之前， 请审查CAS [发布政策](../../developer/Release-Policy.html)。 这将为您 了解您可能期望从新版本中获得哪些更改，以及升级所需的 努力。



## 评估本地覆盖

作为最佳实践，建议您通过 [叠加方法](../installation/WAR-Overlay-Installation.html)部署 CAS 。 如果您有，这里的任务将是识别您的叠加已触及和修改的文件数量。 编目 应用更改的内容和原因，并使用 CAS 更改日志对这些更改进行交叉检查。 很有可能，您的覆盖范围内存在的许多 局部更改是默认通过 CAS 提供的，因为升级将 您在本地放弃许多这些改进。 

您的更改通常是：

* 身份验证方案和策略（即 LDAP、日本广播公司等）
* 在 CAS 属性文件中控制 CAS 行为的设置
* 用户界面更改可能包括 CSS 和爪哇脚本
* 属性解析和发布策略
* 注册并授权使用 CAS 的服务



## 准备发展环境

<img src="http://i.imgur.com/jcdDHWb.jpg" width="160px" height="200px" />

嗯，不 

确保您有一个单独的开发环境，为配置和测试做好准备。 无论升级 有多小，您都希望在翻转开关之前确保它在您的环境中经过良好的测试。 评估 新升级的软件依赖性和平台要求（即 Java 等） ，并确保在尝试之前正确安装和配置所有内容。 



## 消毒配置

我们建议您首先从单独的干净 [CAS 覆盖开始，](../installation/WAR-Overlay-Installation.html) 针对您想要升级的版本 。 这可以保证您的新 CAS 部署 在没有任何本地更改的情况下正常工作。 生成并部署干净的 CAS 覆盖一次，以确保 构建/部署过程正常工作。



## 应用更改

翻阅本地叠加中发现的变化目录。 将这些文件与其 原始版本进行比较和差异。 您可以通过以下方式找出两个版本之间的三角洲：

1. 如果您已经构建了一次干净的 CAS 叠加，您将自动获得通常 `目标` 或 `构建/libs` CAS 叠加目录中的原始版本。 在正确的路径找到正确的文件并进行比较。

2. 直接转到 [项目源存储库](https://github.com/apereo/cas)，查找相应的分支 并比较文件。 

不用说，你需要：

1. 一个体面的差异工具，如 [KDiff3](http://kdiff3.sourceforge.net/)， [温迪夫](http://winmerge.org)， [超越比较](http://www.scootersoftware.com/)等。

2. 一个体面的智能文本编辑，如 [崇高的](http://www.sublimetext.com)， [原子](https://atom.io/) 或完全吹IDE，如 [英特利杰IDEA](https://www.jetbrains.com/idea/)。



## 文档更改

请记住记录本地叠加中存在的其余更改，以便下次执行 相同的过程时，您就知道为什么叠加看起来会如此。 
