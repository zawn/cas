---
layout: 违约
title: CAS - 属性释放缓存
category: 属性
---

# 属性释放缓存

默认情况下， [已解决的属性](Attribute-Resolution.html) 缓存到 SSO 会话的 长度。 如果自 SSO 会话 开始以来有任何属性值更改，则更改不会反映，并在发布时间 返回服务。

注意：请记住，虽然以下策略通常在每个服务级别的发布时间应用，但 CAS 自动创建属性释放缓存策略，具有可配置的超时 和持续时间。 有关设置</a> ，请参阅

了解更多信息。</p> 

以下设置由所有主要属性存储库共享：

| 名字         | 价值                                                  |
| ---------- | --------------------------------------------------- |
| `合并战略`     | 在组合来自多个来源的属性时，指示合并策略。 被接受的值 `多价值`， `添加`， `无`， `多价值` |
| `属性存储ID`   | `设置属性存储库标识符的` ，以在发布时咨询属性解析。                         |
| `忽略雷索韦德属性` | 忽略主要分辨率阶段可能已解决的属性的集合，通常是通过属性存储库。                    |




## 违约

CAS `委托` 与存储库源 标的属性之间的默认关系，因此，主要属性保持为没有 任何其他过程来评估和更新它们。 无需明确配置此配置。



## 缓存

CAS `主` 与存储库源 底层属性之间的关系，该属性描述了 CAS `主` 属性应 缓存的程度和长度。 在属性发布时间，请咨询此组件，以确保根据缓存到期策略向范围服务发布适当的 属性值。 如果到期策略已过，将 咨询基础属性存储库源，以找出可用的属性集。

此组件还能够解决现有主要属性与通过 `合并战略` 属性从存储库源中检索的属性 之间的冲突。 如果您想要保留在身份验证事件期间从不同位置检索到的委托人已 可用的属性集合，则此很有用，等等。

<div class="alert alert-info"><strong>释放时的缓存</strong><p>请注意
，该政策仅在发布时间，在服务票证验证事件后才咨询。 如果有任何自定义网络流
，并且希望依赖已解决的 <code>本金</code> 并且希望
收到一组更新的属性，则这些组件必须在不依赖 <code>主</code>的情况下，查阅基础源目录
。</p></div>

示例配置如下：



```json
•
  "@class"："组织.apereo.cas.服务.注册服务"，
  "服务id"："样本"，
  "名称"："样本"，
  "id"：100，
  "属性释放政策"：{
    "@class"："org.apereo.cas.服务。返回返回属性释放政策"，
    "主要属性存储库"：{
      "@class"："组织.apereo.cas.认证.委托.缓存。 "，
      "时间统一"："小时"，
      "到期"：2，
      "融合战略"："无"
    }
  }
}
```




## 合并策略

默认情况下，不会实施合并策略，这意味着主要属性始终被忽略，并且始终返回源 属性。 但以下任何合并策略都可能是一个合适的选择：



### 合并

同名属性合并到多值列表中。

例如：

1. 校长具有属性 `[email=eric.dalquist@example.com， 电话=123-456-7890]`
2. 源具有属性 `[电话][111-222-3333，000-999-8888]，办公室=3233]`
3. 由此产生的合并将具有属性： `[email=eric.dalquist@example.com，电话=123-456-7890，111-222-3333，000-999-8888]，办公室=3233}`




```json
•
  "@class"："组织.apereo.cas.服务.注册服务"，
  "服务id"："样本"，
  "名称"："样本"，
  "id"：100，
  "属性释放政策"：{
    "@class"："org.apereo.cas.服务。
    "主要归因"：[
      "@class"："组织.apereo.cas.认证.委托.缓存.缓存"，
      "时间统一"："小时"，
      "到期"：2，
      "合并战略"："多重"
    }
  }
}
```




### 加

属性被合并，因此产生本金不存在的来源属性。

例如：

1. 校长具有属性 `[email=eric.dalquist@example.com， 电话=123-456-7890]`
2. 源具有属性 `[电话][111-222-3333，000-999-8888]，办公室=3233]`
3. 由此产生的合并将具有属性： `+email=eric.dalquist@example.com，电话=123-456-7890，办公室=3233}`



```json
•
  "@class"："组织.apereo.cas.服务.注册服务"，
  "服务id"："样本"，
  "名称"："样本"，
  "id"：100，
  "属性释放政策"：{
    "@class"："org.apereo.cas.服务。返回归因释放政策"，
    "主要属性" ： [
      "@class"： "org. apereo. cas. 认证. 校长. 缓存。
      "时间统一"："小时"，
      "到期"：2，
      "合并战略"："添加"
    }
  }
}
```




### 取代

属性被合并，因此源中的属性始终替换主要属性。

例如：

1. 校长具有属性 `[email=eric.dalquist@example.com， 电话=123-456-7890]`
2. 源具有属性 `[电话][111-222-3333，000-999-8888]，办公室=3233]`
3. 由此合并的属性包括： `[email=eric.dalquist@example.com，电话][111-222-3333，000-999-8888]，办公室=3233}`




```json
•
  "@class"： "org. apereo. cas. 服务. 注册服务"，
  "服务"："样本"，
  "名称"："样本"，
  "id"：100，
  "属性释放政策"：{
    "@class"："org.apereo.cas.服务。返回归因释放政策"，
    "主要属性存储库"： [
      "@class"： "org. apereo. cas. 认证. 校长. 缓存。 "，
      "时间统一"： "小时"，
      "到期"： 2，
      "合并战略"： "替换"
    [
  ]
}
```





## 属性存储库筛选

主要属性存储库可以查阅 [人名录](Attribute-Resolution.html)定义和控制的属性源。 假设 JSON 属性 存储库源 `MyJson 存储库`标识符定义，以下定义将忽略 MyJson 存储库 `以前解决的所有属性和联系人，` 再次提取属性并将其缓存 `30` 分钟。



```json
•
  "@class"："org.apereo.cas.服务.注册服务"，
  "服务id"："^（https|图片）"，
  "名称"："HTTPS 和 IMAPS"，
  "id"： 1，
  "属性释放政策"： [
    "@class"： "org. apereo. cas. 服务. 返回所有归因重新发布政策"，
    "主要属性报表"： [
        "@class"： "org. apereo. cas. 认证. 校长. cache. 缓存" ，
        "时间统一"： "分钟"，
        "到期"： 30，
        "忽略估计属性"： 真实，
        "属性存储"： [ "java.ul.il.哈希塞特"，["我的Json仓库"]]，
        "合并战略"："多重价值"
    }
  =
}
```


下面是一个类似的例子，缓存关闭的服务，CAS试图结合以前解决的属性与属性 存储库的结果确定为 `MyJson存储库`。 期望在认证阶段 期间，MyJson 存储库</code> `属性源排除在主要分辨率之外，并且仅应在此服务发布时间联系：</p>

<pre><code class="json">•
  "@class"："组织.apereo.cas.服务.注册服务"，
  "服务id"："^（https|图片）/*"，
  "名称"："HTTPS和IMAPS"，
  "id"：1，
  "属性释放政策"：{
    "@class"："org.apereo.cas.服务。返回所有属性发布政策"，
    "主要归因仓库"： [
        "@class"： "org. apereo. cas. 认证. 校长. 默认原则归因仓库"，
        "忽略resolved 属性"： 虚假 ，
        "属性存储"："java.ul.ut.哈希集"，"MyJson存储库"]]，
        "合并战略"："多重"
    =
  =
}
`</pre>
