---
layout: 默认
title: CAS-基于风险的自适应身份验证
category: 验证
---

# 基于风险的认证

基于风险的身份验证使CAS能够根据过去的用户行为 以及收集的身份验证事件，统计信息等来检测可疑且看似欺诈的身份验证请求。 一旦和 *之后* ，其中主要被识别主认证， 认证交易经由许多配置的标准和围栏分析以确定如何 *风险* 的尝试可能会。 评估步骤的结果是累积风险评分，然后将其与CAS操作员设置的风险阈值进行权衡。 如果认为认证尝试的风险远超过风险阈值，则可以允许CAS采取措施并降低风险

简而言之，讲述的故事是：
> 如果身份验证请求的 [X%] ，请采取措施降低该风险。

这个功能的功能是 **完全** 取决于过去收集的统计数据和身份验证事件。 没有数据，就没有什么可以分析，也没有检测到的风险。

请注意，对尝试的评估和降低的风险均记录在审核日志中。

<div class="alert alert-info"><strong>自适应身份验证</strong><p>
如果你需要抢先评估基础上的要求，各种特性的验证尝试
您可以在感兴趣 <a href="../mfa/Configuring-Adaptive-Authentication.html">本指南</a> 代替。</p></div>

## 风险计算

可以启用一个或多个风险计算器，以允许对身份验证请求进行分析。

风险计算策略的高级解释如下：

- 如果主体没有任何记录的事件，则认为该请求可疑。
- 如果基于活动标准的主体记录的事件数与事件总数匹配，则将 请求视为安全。

### IP地址

该计算器调查与客户端ip地址匹配的过去的身份验证事件。 如果希望 认为来自未知ip地址的身份验证请求对用户可疑，则适用。 这里的故事是：

> 查找与当前客户端ip地址匹配的所有过去的身份验证事件，并计算平均分数。

### 浏览器用户代理

该计算器调查与客户端的 `用户代理` 字符串匹配的过去的身份验证事件。 如果希望 认为来自未知浏览器的身份验证请求对用户可疑，则适用。 这里的故事是：

> 查找与当前客户端浏览器匹配的所有过去的身份验证事件，并计算平均分数。

### 地理位置定位

该计算器调查包含地理位置数据的过去身份验证事件，并将这些事件与当前地理位置进行比较。 如果当前地理位置数据不可用，它将尝试根据当前客户端ip地址对位置进行地理编码。 此功能 主要取决于是否通过客户端浏览器将地理数据提供给CAS，而 需要 [进行身份验证请求的地理跟踪](GeoTracking-Authentication-Requests.html)。

这里的故事是：

> 查找与当前客户端位置匹配的所有过去的身份验证事件，并计算平均分数。

### 约会时间

该计算器调查符合定义时间窗口的过去身份验证事件。 如果您希望 认为该窗口之外的身份验证请求对用户可疑，则适用。 这里的故事是：

> 查找现在之前/之后X个小时建立的所有过去的身份验证事件，并计算平均分数。

## 风险缓解

一旦认证尝试被认为有风险，可以启用应急计划以减轻风险。 如果配置并允许，则 CAS可以通过电子邮件和短信通知主体和部署者。

### 块验证

阻止身份验证流程继续进行，并禁止建立SSO会话。

### 多因素身份验证

强制认证事件为 [选择的多因素流](../mfa/Configuring-Multifactor-Authentication.html)， 由提供者ID来标识。

## 配置

通过在叠加层中包含以下依赖项来启用支持：

```xml
<dependency>
    <groupId>org.apereo.cas</groupId>
    <artifactId>cas-server-support-electrofence</artifactId>
    <version>${cas.version}</version>
</dependency>
```

要查看CAS属性的相关列表，请 [查看本指南](../configuration/Configuration-Properties.html#risk-based-authentication)。

### 消息传送 & 通知

可以通过文本消息和/或电子邮件将危险的身份验证尝试通知给用户。 要了解更多有关可用选项，请 [参阅本指南](../notifications/SMS-Messaging-Configuration.html) 或 [本指南](../notifications/Sending-Email-Configuration.html)。

### 记住

- 您 **必须** 允许并配置CAS以跟踪和记录 [身份验证事件](Configuring-Authentication-Events.html)。
- 您 **必须** 允许CAS并将其配置为 [地理认证请求](GeoTracking-Authentication-Requests.html)。
- 如果选择的应急计划是强制用户进入多因素身份验证流程，则 **必须** 将CAS配置为 [多因素身份验证](../mfa/Configuring-Multifactor-Authentication.html) 和相关提供者。
