---
layout: 违约
title: 中科院 - JAAS 认证
category: 认证
---

# 日本航空认证

[JAAS](https://docs.oracle.com/javase/9/security/java-authentication-and-authorization-service-jaas1.htm) 是Java标准 认证和授权API。 JAAS 是通过外部化的纯文本配置文件配置的。 使用中科院的JAAS可以修改认证过程，而无需重建和重新部署CAS ，并允许PAM风格的多模块"堆叠"身份验证。

## 配置

JAAS 组件在 CAS 核心模块中提供，无需使用其他依赖项。 JAAS 处理程序委托到内置的 JAAS 子系统，根据 JAAS 配置文件中的 指令执行身份验证。

要查看 CAS 属性的相关列表，请 [查看本指南](../configuration/Configuration-Properties.html#jaas-authentication)。

## JAAS 配置文件

默认的JAAS配置文件位于 `$JRE_HOME/lib/安全/java.安全`。 请务必注意 JAAS 配置适用于整个合资企业。 ，通过将 `java.security.auth.登录.将` 系统属性配置到备用文件路径（即 `文件：等/卡/康菲格/贾斯.康菲`）。

提供一个示例 JAAS 配置文件以供参考。

```
/**
  *JAAS的登录配置，其域名定义为CAS。
  */
CAS=
  组织.sample.jaas.登录。示例登录模块足够的
    调试=FALSE：
=：
```

## 登录模块

CAS 提供以下登录模块：

### 詹迪

该模块会提示用户名和密码，然后根据 JNDI 配置的目录服务中存储的密码验证密码。

```
CAS •
  com.sun.security.auth.模块.JndiLogin 模块足够
    用户.提供商.url=name_service_url
    组.提供商.url=name_service_url
    调试=错误;
=：
```

`name_service_url` 的价值指定了该模块访问相关用户和组信息的目录服务和路径。 由于此模块仅执行一级搜索以查找相关用户信息，因此 URL 必须指向目录上方的目录，其中用户和组信息存储在目录服务中。

有关所有其他选项和更全面文档的列表，请参阅本指南</a>

了解更多信息。</p> 



### 克贝罗斯

此模块使用 Kerberos 协议对用户进行身份验证。 模块的配置条目有几个选项来控制 身份验证过程，以及 `主题`的私人凭据集的添加。 无论这些选项如何， `主体`的主要集和私有凭据集只有在需要提交时才会更新。 当提交被调用时， `KerberosPrinprin` 将添加到 `主题`的主要设置中，KerberosTicket 将添加到 `主体`的私人凭据中。

如果模块的配置条目 `商店钥匙` 设置为真选项，那么 `KerberosKey` 也将添加到 主体的私人凭据。 `KerberosKey`，校长的密钥将从密钥塔中获取，也可以从用户的密码中获取。

此模块还识别 `不提示` 选项。 如果设置为真实，则不会提示用户输入密码。 用户可以通过在配置条目中使用票务缓存 `` 选项来指定票务缓存的位置。 用户可以通过在配置条目中使用 `键塔` 选项来指定键盘位置。

主要名称可以通过使用本金</code>`选项在配置条目中指定。 主要名称可以 
为简单的用户名或服务名称，如 <code>主机/任务。eng.sun.com`。 本金也可以使用 系统属性 `太阳。安全.krb5.委托`设置。 此属性在登录过程中进行检查。 如果未设置此属性，则 则使用配置中的主名称。 在未设置主属性且主 条目也不存在的情况下，会提示用户使用该名称。 当设置此条目属性，并且 `使用"门票缓存` "设置为 真实时，仅使用属于此本金的 TGT。

请注意，必须通过设置 `- 贾瓦. 安全. krb5.` / 等 /krb5.</code>向 Kerberos 身份验证的 JVM 提供有效的 `krb5.。</p>

<pre><code>CAS •
  com.sun.security.auth.模块.Krb5 登录模块足够
    刷新Krb5Config=真/假
    使用票务缓存=真/假
    票缓存|...
    更新TGT=真/假
    使用钥匙塔=真/假
    不提示=真/假
    键塔=真/假
    商店钥匙=真/假
    本金]...
    德布=错误：
}：
`</pre> 

有关所有其他选项和更全面文档的列表，请参阅本指南</a> 了解更多信息。</p> 



### 联合国

该模块导入用户的 Unix 主信息（`Unixprinal`、 `联合数字用户主`和 `Unix 数字集团`），并将它们与当前 `主题`联系起来。



```
CAS =
  com. sun. 安全. auth. 模块. unixlogin 模块足够的
    调试 = 错误;
= ：
```


有关所有其他选项和更全面文档的列表，请参阅本指南</a> 了解更多信息。</p> 



### 北卡罗来纳州

此模块将用户的 NT 安全信息渲染为一些 `校长`，并将它们与 `主题`联系起来。



```
CAS =
  com. sun. 安全. auth. 模块. ntlogin 模块足够的
    调试=真实
    调试=错误;
=：
```


有关所有其他选项和更全面文档的列表，请参阅本指南</a> 了解更多信息。</p> 



### 阿尔达普

此模块执行基于 LDAP 的身份验证。 用户名和密码根据存储在 LDAP 目录中的相应用户凭据进行验证。 如果身份验证成功，则使用用户的尊贵名称创建新的 LdapPrination</code> `，使用用户的用户名创建新的 <code>用户主` ，并且两者都与当前 `主题`相关联。

有关所有其他选项和更全面文档的列表，请参阅本指南</a> 了解更多信息。</p> 

此模块以三种模式之一运行。 通过指定特定选项集来选择模式： 



#### 首先搜索

在搜索第一模式下，搜索LDAP目录以确定用户的尊贵名称，然后尝试身份验证。 使用提供的用户名与指定的搜索筛选器一起执行（匿名）搜索。 如果成功，则尝试使用用户的尊贵姓名和提供的密码进行身份验证。 要启用此模式，请设置 `用户过滤器` 选项，并省略 `身份验证` 选项。 当用户的尊贵姓名事先不为人所知时，请使用 `搜索第一` 模式。

下面的示例标识了 LDAP 服务器，并指定用户的条目由其 `uid` 定位，并 `对象类` 属性。 它还规定，应创建基于用户 `员工数量` 属性的标识。



```
CAS +
  com.sun.security.auth.模块.LdapLogin 模块需要
    用户提供者="ldap://ldap-svr/ou=people,dc=example,dc=com"
    用户过滤器]"（&（uid={USERNAME}）（对象类=inetOrgPerson））））"
    身份="{EMPLOYEENUMBER}"
    调试]真实：
}：
```




#### 身份验证第一

在 `身份验证第一` 模式下，使用提供的用户名和密码尝试身份验证，然后搜索 LDAP 目录。 如果身份验证成功，则使用提供的用户名与指定的搜索筛选器一起执行搜索。 要启用此模式，请设置 `身份识别` 和 `用户过滤器` 选项。 访问已配置为不允许匿名搜索的 LDAP 目录时，使用 `身份验证第一` 模式。

下面的示例要求动态定位 LDAP 服务器，使用提供的用户名直接进行身份验证，但不受 SSL 的保护，并且用户条目由三个命名属性之一及其 `对象类` 属性定位。



```
CAS •
  com.sun.security.auth.模块.LdapLogin 模块要求
    用户提供="ldap:///cn=users,dc=example,dc=com"
    身份="{USERNAME}"
    用户过滤器]"（&（|（（用户名={USERNAME}{USERNAME}）（用户名={USERNAME}）（对象类=用户））"
    使用SSL=虚假
    诊断=真实：
}：
```




#### 仅限身份验证

在仅 `身份验证` 模式下，使用所提供的用户名和密码尝试身份验证。 LDAP 目录不被搜索，因为用户的尊贵名称已为人所知。 要启用此模式，请将身份识别选项设置为有效的尊贵名称，并省略用户筛选选项。 当用户的尊贵姓名提前知道时，请使用仅限身份验证的模式。

下面的示例标识了替代 LDAP 服务器，它指定了用于身份验证的尊贵名称和用于授权的固定标识。 未执行目录搜索。



```
CAS •
  com.sun.security.auth.模块.Ldaplogin 模块要求
    用户提供者="ldap://ldap-svr1 ldap://ldap-svr2"
    身份="cn={USERNAME}，ou=人，dc=示例，dc=com"
    身份="工作人员"
    调试正确;
  =：
```




### 焊接

Ldaptive 提供多个 [登录模块，用于对 LDAP 进行身份验证和授权](http://www.ldaptive.org/docs/guide/jaas.html) 。 每个模块接受与 ldaprescode 基础中的对象上的设置器对应的属性。 如果您希望设置作为设置器可用的特定配置选项，则很有可能在模块上接受该选项。 任何未知选项都将作为通用属性传递给提供商。

为了利用 Ldaptive 提供的登录模块，必须存在以下依赖项并添加到叠加中：



```xml
<dependency>
    <groupId>组织.apereo.cas</groupId>
    <artifactId>套机服务器支持-ldap-核心</artifactId>
    <version>${cas.version}</version>
</dependency>
```




### 钥匙店

此模块提示关键商店别名，并填充主题与别名的主体和凭据。 存储 `X500 原则` ，用于在主体负责人的别名证书中为第一个证书的主题尊贵名称， 该别名的证书路径在主体的公共凭据中，和 `X500 私人信用` 其证书是别名证书路径中的第一个证书，其私钥是该标件的私人凭据中的别名的私钥。



```
CAS =
  com. sun. 安全. auth. 模块. 钥匙商店登录模块足够
    密钥存储+ 。。。
    密钥存储类型=
    密钥存储提供器=。。。
    钥匙商店阿利亚斯
    钥匙商店密码。。。
    私人密码。。。
    保护=...
    德布=错误：
}：
```


有关所有其他选项和更全面文档的列表，请参阅本指南</a> 了解更多信息。</p> 



## 部署

如果您的部署策略最终使用 [嵌入式容器](Configuring-Servlet-Container.html#embedded)， 您可以以系统属性的形式传递 JAAS 配置文件的位置：



```bash
java - 贾瓦. 安全. auth. 登录. 配置文件： 等 / 卡斯 / 康菲格 / 贾斯. 配置 - jar...
```


或者，您可以在 CAS 设置中激活登录配置类型，以 `JavaLoginConfig` ，并直接在设置中指定 到 jaas 配置文件的路径。

有关配置管理的更多信息，请 [本指南](../configuration/Configuration-Management.html)。
